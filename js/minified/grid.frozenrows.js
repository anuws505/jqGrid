!function(r){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],r):r(jQuery)}(function(z){"use strict";z.jgrid.extend({setupFrozenRows:function(r){var u=z.extend({first:0,last:0,rowids:[],saveFirstLastId:!1,classes:""},r||{});return this.each(function(){if(!(!0===this.p.subGrid||!0===this.p.treeGrid||!0===this.p.cellEdit||this.p.scroll||!0===this.p.frozenColumns||!0===this.p.frozenRows||!0===this.p.grouping||u.first<=0&&u.last<=0&&0===u.rowids.length)){var r,s,i,o=this,e="border-box"===z("#gbox_"+z.jgrid.jqID(o.p.id)).css("box-sizing")?0:1,t="#"+z.jgrid.jqID(o.p.id),n="#gview_"+z.jgrid.jqID(o.p.id),d=z(".ui-jqgrid-htable",n).height(),f=z(n).width(),h=[],d=z('<div style="position:absolute;left:0px;top:'+(d+e)+'px;height:0px;overflow-x:hidden;" class="frozen-rdiv ui-jqgrid-rdiv"></div>');if(z(n).append(d),z(".frozen-rdiv",n).css("width",f-(z.jgrid.scrollbarWidth()+2)),h.push(z(".jqgfirstrow",t).clone(!0)),u.rowids&&0<u.rowids.length){for(r=0;r<u.rowids.length;r++)for(s=o.rows.length;s--;)if(o.rows[s].id===u.rowids[r]){h.push(z(o.rows[s]).clone(!0)),z(o.rows[s]).insertBefore(o.rows[r+1]);break}}else if(0<u.first)for(r=0;r<u.first;r++)h.push(z(o.rows[r+1]).clone(!0)),u.saveFirstLastId&&(u.rowids||(u.rowids=[]),u.rowids.push(o.rows[r+1].id));else{if(!(0<u.last))return;for(s=o.rows.length,r=0;r<u.last;r++)h.splice(1,0,z(o.rows[s-1]).clone(!0)),u.saveFirstLastId&&(u.rowids||(u.rowids=[]),u.rowids.unshift(o.rows[s-1].id)),z(o.rows[s-1]).insertBefore(o.rows[1])}d.css("height","auto");var l=z(t).clone(!0);for(l.children("tbody").empty(),s=0,i=h.length;s<i;s++)h[s].addClass(u.classes).appendTo(l);l.appendTo(d);var w=o.p.id+"_fr",e=(z(t,d).attr("id",w),w="#"+z.jgrid.jqID(w),z.jgrid.getMethod("getStyleUI")),f=o.p.styleUI+".common",a=e(f,"highlight",!0),c=e(f,"hover",!0);if(z(".frozen-rdiv",n).on("click","tr",function(){var r=z(this).index();z(this).addClass(a).siblings().removeClass(a),z(".frozen-rdiv tr").eq(r).addClass(a).siblings().removeClass(a)}),z(w).on("click",function(){z(".frozen-rdiv tbody").children("tr").each(function(){z(this).removeClass(a)})}),z(n+" .ui-jqgrid-bdiv").first().on("scroll",function(){var r=this.scrollLeft;z(".frozen-rdiv").scrollLeft(r)}),z(".frozen-rdiv tr").hover(function(){var r=z(this).index();z(".frozen-rdiv tr").eq(r).addClass(c)},function(){var r=z(this).index();z(".frozen-rdiv tr").eq(r).removeClass(c)}),o.p.rownumbers){var p=!1;try{if(z(o.rows[0].cells).each(function(r){if(z(this).hasClass("jqgrid-rownumber"))return p=r,!1}),!1!==p){for(s=o.rows.length,r=1;r<s;)z(o.rows[r].cells[p]).html(r),r++;for(s=z(w)[0].rows.length,r=1;r<s;)z(w)[0].rows[r].cells[p].innerHTML=r,r++}}catch(r){}}o.grid.frbDiv=d,o.p.frozenRows=!0,o.p.frozenRowsPrm=u}})},destroyFrozenRows:function(r){return this.each(function(){this.grid.frbDiv.remove(),this.p.frozenRows=!1,r&&(this.p.frozenRowsPrm=null)})},setFrozenRows:function(r){return this.each(function(){0<this.p.records&&z(this).jqGrid("setupFrozenRows",r),z(this).on("jqGridAfterGridComplete.setFrozenRows",function(){this.p.frozenRowsPrm&&!z.isEmptyObject(this.p.frozenRowsPrm)?(z(this).jqGrid("destroyFrozenRows"),z(this).jqGrid("setupFrozenRows",this.p.frozenRowsPrm)):z(this).jqGrid("setupFrozenRows",r)}),z(this).on("jqGridResizeStop.setFrozenRows",function(){if(this.p.frozenRowsPrm)try{z(this).jqGrid("destroyFrozenRows");var r=0<this.p.frozenRowsPrm.last&&!this.p.frozenRowsPrm.saveFirstLastId&&0===this.p.frozenRowsPrm.first;r&&(this.p.frozenRowsPrm.first=this.p.frozenRowsPrm.last),z(this).jqGrid("setupFrozenRows",this.p.frozenRowsPrm),r&&(this.p.frozenRowsPrm.first=0)}catch(r){}})})}})});